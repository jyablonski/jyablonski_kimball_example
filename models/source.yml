version: 2

sources:
  - name: application_db
    database: |
      {%- if  target.name == "snowflake" -%} production
      {%- elif target.name == "target_2" -%} test_database_2
      {%- else -%} postgres
      {%- endif -%}
    schema: source
    description: Landing Schema for Source Data
    tables:
      - name: customer
      - name: customer_audit
      - name: financial_account
      - name: integration
      - name: invoice
      - name: emails
        freshness: # default freshness
          warn_after: { count: 12, period: hour }
          error_after: { count: 24, period: hour }
        loaded_at_field: modified_at
      - name: order
      - name: order_detail
      - name: order_json
      - name: payment
      - name: payment_type
      - name: product
      - name: product_category
      - name: product_price
      - name: sale
      - name: sales_data
      - name: store
      - name: store_audit
      - name: user_actions
      - name: user_geolocation_audit
      - name: user_sessions
        config:
          event_time: session_end
      #test
